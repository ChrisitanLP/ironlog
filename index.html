<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>IRONLOG</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;800;900&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- ===== SPLASH SCREEN ===== -->
  <div id="splash" class="splash">
    <div class="splash-logo">
      <span class="logo-icon">âš¡</span>
      <h1>IRONLOG</h1>
      <p>Track. Compete. Dominate.</p>
    </div>
  </div>

  <!-- ===== APP CONTAINER ===== -->
  <div id="app" class="app hidden">

    <!-- ===== HEADER ===== -->
    <header class="app-header">
      <div class="header-left">
        <span class="header-logo">âš¡ IRONLOG</span>
      </div>
      <div class="header-right">
        <div class="header-streak">
          <span class="streak-icon">ğŸ”¥</span>
          <span id="header-streak-count">0</span>
        </div>
        <div class="avatar-sm" id="header-avatar"></div>
      </div>
    </header>

    <!-- ===== MAIN CONTENT AREA ===== -->
    <main class="main-content">

      <!-- ==============================
           SECTION: FEED
      ============================== -->
      <section id="section-feed" class="section active">
        <div class="section-header">
          <h2>Feed</h2>
          <span class="section-sub">Comunidad activa</span>
        </div>
        <div id="feed-container" class="feed-container"></div>
      </section>

      <!-- ==============================
           SECTION: TRAIN
      ============================== -->
      <section id="section-train" class="section">

        <!-- Vista: Home del entrenamiento -->
        <div id="train-home" class="train-view active">
          <div class="section-header">
            <h2>Entrenar</h2>
            <span class="section-sub">Â¿Listo para destruirte?</span>
          </div>
          <button class="btn-start-workout" id="btn-start-workout">
            <span class="btn-icon">â–¶</span>
            <span>Iniciar Entrenamiento</span>
          </button>
          <button class="btn-view-templates" id="btn-view-templates">
            <span class="btn-icon">â­</span>
            <span>Mis Plantillas</span>
          </button>
          <div class="recent-workouts-title">Ãšltimas sesiones</div>
          <div id="recent-workouts-list" class="recent-workouts-list"></div>
        </div>

        <!-- â”€â”€ VISTA 2: ConfiguraciÃ³n previa â”€â”€ -->
        <div id="train-config" class="train-view">
          <div class="session-header">
            <button class="btn-back" id="btn-back-config">â†</button>
            <span class="session-header-title">Nueva Rutina</span>
          </div>
          <div class="config-body">
            <div class="config-field">
              <label class="config-label">Nombre de la rutina</label>
              <input type="text" id="config-name" class="config-input" placeholder="Ej: Push Day, Piernas..." maxlength="40" />
            </div>
            <div class="config-field">
              <label class="config-label">Descanso entre series</label>
              <div class="rest-options" id="rest-options">
                <button class="rest-btn" data-secs="60">60s</button>
                <button class="rest-btn active" data-secs="90">90s</button>
                <button class="rest-btn" data-secs="120">2m</button>
                <button class="rest-btn" data-secs="180">3m</button>
              </div>
            </div>
            <div class="config-field">
              <label class="config-label">Tipo de entrenamiento</label>
              <div id="type-options" class="type-options"></div>
            </div>
            <div class="config-field">
              <label class="config-label">Modo de entrenamiento</label>
              <div class="companion-toggle">
                <input type="checkbox" id="companion-mode-check" class="toggle-check" />
                <label for="companion-mode-check" class="toggle-label">
                  <span class="toggle-icon">ğŸ‘¥</span>
                  <span>Entreno con compaÃ±ero</span>
                </label>
              </div>
              <div id="companion-name-input" class="companion-name-input hidden">
                <input type="text" id="companion-name" class="config-input" 
                      placeholder="Nombre del compaÃ±ero" maxlength="30" />
              </div>
            </div>
            <div class="config-actions">
              <button class="btn-outline" id="btn-save-template-config" style="margin-bottom: 8px;">
                ğŸ’¾ Guardar como plantilla vacÃ­a
              </button>
              <button class="btn-primary" id="btn-config-continue">
                Agregar primer ejercicio â†’
              </button>
            </div>
          </div>
        </div>

        <!-- â”€â”€ VISTA 3: SesiÃ³n activa â”€â”€ -->
        <div id="train-session" class="train-view">
          <div class="session-header">
            <button class="btn-back" id="btn-back-session">â†</button>
            <div class="session-title-wrap">
              <span id="session-name-display" class="session-name-label"></span>
            </div>
            <div class="session-timer" id="session-timer">00:00</div>
          </div>

          <!-- Panel del ejercicio activo -->
          <div id="active-exercise-panel" class="active-ex-panel hidden">
            <div class="active-ex-header">
              <div>
                <div id="active-ex-name" class="active-ex-name"></div>
                <div id="active-ex-muscle" class="active-ex-muscle"></div>
              </div>
              <button class="btn-finish-exercise" id="btn-finish-exercise">Finalizar ejercicio</button>
            </div>

            <!-- Estado: preview -->
            <div id="state-preview" class="ex-state">
              <div id="ex-preview-body" class="ex-preview-body"></div>
              <div class="preview-actions">
                <button class="btn-outline" id="btn-see-full">ğŸ“– Ver explicaciÃ³n</button>
                <button class="btn-primary" id="btn-start-set">â–¶ Iniciar Serie 1</button>
              </div>
            </div>

            <!-- Estado: serie en curso -->
            <div id="state-set-running" class="ex-state hidden">
              <div class="set-running-header">
                <div class="set-running-badge" id="set-running-badge">SERIE 1</div>
                <button class="btn-timer-control" id="btn-pause-set">â¸</button>
                <div class="set-running-timer" id="set-running-timer">0:00</div>
              </div>
              
              <!-- Tipo de serie -->
              <div class="set-type-selection">
                <button class="set-type-btn" data-type="warmup" onclick="selectSetType('warmup')">
                  ğŸ”¥ Calentamiento
                </button>
                <button class="set-type-btn" data-type="approach" onclick="selectSetType('approach')">
                  ğŸ“Š AproximaciÃ³n
                </button>
                <button class="set-type-btn active" data-type="effective" onclick="selectSetType('effective')">
                  ğŸ’ª Efectiva
                </button>
              </div>
              
              <div class="set-running-inputs">
                <div class="set-running-field">
                  <label>PESO (kg)</label>
                  <input type="number" id="set-weight-input" class="set-big-input" 
                        inputmode="decimal" placeholder="0" step="0.5" />
                </div>
                <div class="set-running-sep">Ã—</div>
                <div class="set-running-field">
                  <label>REPS</label>
                  <input type="number" id="set-reps-input" class="set-big-input" 
                        inputmode="numeric" placeholder="0" />
                </div>
              </div>
              
              <div id="training-reminder" class="training-reminder hidden"></div>
              
              <button class="btn-finish-set" id="btn-finish-set">âœ“ Finalizar Serie</button>
            </div>

            <!-- Estado: descanso -->
            <div id="state-rest" class="ex-state hidden">
              <div class="rest-header">
                <div class="rest-label">DESCANSO</div>
                <div class="rest-countdown" id="rest-countdown">90</div>
                <div class="rest-progress-wrap">
                  <div class="rest-progress-bar" id="rest-progress-bar"></div>
                </div>
              </div>
              
              <div class="rest-last-set" id="rest-last-set"></div>
              
              <div class="rest-next-weight">
                <div class="rest-next-label">Peso para la siguiente serie</div>
                <div class="rest-weight-controls">
                  <button class="rest-w-btn" id="rest-weight-minus">âˆ’</button>
                  <span class="rest-weight-val" id="rest-weight-val">0</span>
                  <span class="rest-weight-unit">kg</span>
                  <button class="rest-w-btn" id="rest-weight-plus">+</button>
                </div>
              </div>
              
              <div class="rest-actions">
                <button class="btn-pause-rest" id="btn-pause-rest">â¸ Pausar</button>
                <button class="btn-skip-rest" id="btn-skip-rest">Omitir descanso â†’</button>
              </div>
              
              <div id="training-reminder" class="training-reminder hidden"></div>
            </div>

            <!-- Sets completados -->
            <div class="completed-sets-wrap">
              <div class="completed-sets-title" id="completed-sets-title"></div>
              <div id="completed-sets-list" class="completed-sets-list"></div>
            </div>
          </div>

          <!-- Lista de ejercicios completados + botones de control -->
          <div id="session-bottom" class="session-bottom">
            <!-- BotÃ³n de turno (solo visible si companionMode estÃ¡ activo) -->
            <button class="btn-companion-turn hidden" id="btn-companion-turn">
              â¸ Turno de compaÃ±ero
            </button>
            
            <div id="completed-exercises-list" class="completed-ex-list"></div>
            <button class="btn-add-exercise" id="btn-add-exercise">+ Agregar Ejercicio</button>
            <button class="btn-save-template" id="btn-save-template">ğŸ’¾ Guardar como plantilla</button>
            <button class="btn-finish-workout" id="btn-finish-workout">âœ“ Finalizar Entrenamiento</button>
          </div>
        </div>

        <!-- â”€â”€ VISTA 4: Resumen post-entrenamiento â”€â”€ -->
        <div id="train-summary" class="train-view">
          <div class="summary-header">
            <div class="summary-badge">âš¡ SESIÃ“N COMPLETADA</div>
            <h2 id="summary-name"></h2>
            <div class="summary-duration" id="summary-duration"></div>
          </div>
          <div class="summary-stats-grid" id="summary-stats-grid"></div>
          <div class="summary-prs" id="summary-prs"></div>
          <div class="summary-time-breakdown" id="summary-time-breakdown"></div>
          <div class="summary-time-extended" id="summary-time-extended">
            <div class="time-breakdown-row" style="padding: 0 18px;">
              <div class="tbd-label">
                <div class="tbd-dot" style="background:var(--accent)"></div>
                Descanso omitido
              </div>
              <div class="tbd-val" id="summary-skipped-time"></div>
            </div>
            <div class="time-breakdown-row companion-wait-row hidden" style="padding: 0 18px;">
              <div class="tbd-label">
                <div class="tbd-dot" style="background:var(--accent-blue)"></div>
                Esperando compaÃ±ero
              </div>
              <div class="tbd-val" id="summary-companion-time"></div>
            </div>
          </div>
          <div class="summary-exercises" id="summary-exercises"></div>
          <button class="btn-primary full-width" id="btn-to-feed" style="margin:0 18px 24px;width:calc(100% - 36px)">Ver en el Feed â†’</button>
        </div>

      </section>

      <!-- ==============================
           SECTION: STATS
      ============================== -->
      <section id="section-stats" class="section">
        <div class="section-header">
          <h2>EstadÃ­sticas</h2>
          <span class="section-sub">Tu progreso real</span>
        </div>
        <div class="stats-content" id="stats-content"></div>
      </section>

      <!-- ==============================
           SECTION: PROFILE
      ============================== -->
      <section id="section-profile" class="section">
        <div id="profile-content"></div>
      </section>

    </main>

    <!-- ===== BOTTOM NAVIGATION ===== -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-section="feed">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Inicio</span>
      </button>
      <button class="nav-item" data-section="train">
        <span class="nav-icon">ğŸ’ª</span>
        <span class="nav-label">Entrenar</span>
      </button>
      <button class="nav-item" data-section="stats">
        <span class="nav-icon">ğŸ“ˆ</span>
        <span class="nav-label">Stats</span>
      </button>
      <button class="nav-item" data-section="profile">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label">Perfil</span>
      </button>
    </nav>

  </div>

  <!-- ===== MODAL: ADD EXERCISE ===== -->
  <div id="modal-add-exercise" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-header">
        <h3>Agregar Ejercicio</h3>
        <button class="modal-close" id="modal-close-exercise">âœ•</button>
      </div>
      <input type="text" id="exercise-search" class="modal-input" placeholder="Buscar ejercicio..." />
      <div id="exercise-suggestions" class="exercise-suggestions"></div>
      <input type="text" id="exercise-custom" class="modal-input" placeholder="O escribe uno personalizado..." />
      <button class="btn-primary" id="btn-confirm-exercise">Agregar</button>
    </div>
  </div>

  <!-- ===== MODAL: SELECCIÃ“N DE MODO DE ENTRENAMIENTO ===== -->
  <div id="modal-workout-mode" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-header">
        <h3>Iniciar Entrenamiento</h3>
        <button class="modal-close" onclick="Modal.close('modal-workout-mode')">âœ•</button>
      </div>
      <div class="mode-selection">
        <button class="mode-option" onclick="selectWorkoutMode('now')">
          <div class="mode-icon">â–¶ï¸</div>
          <div class="mode-title">Usar ahora</div>
          <div class="mode-desc">Empieza a entrenar inmediatamente</div>
        </button>
        <button class="mode-option" onclick="selectWorkoutMode('plan')">
          <div class="mode-icon">ğŸ“‹</div>
          <div class="mode-title">Planificar para despuÃ©s</div>
          <div class="mode-desc">Crea una rutina para usar mÃ¡s tarde</div>
        </button>
        <button class="mode-option" onclick="renderTemplatesList(); Modal.close('modal-workout-mode'); Modal.open('modal-templates')">
          <div class="mode-icon">â­</div>
          <div class="mode-title">Usar plantilla guardada</div>
          <div class="mode-desc">Carga una rutina previamente creada</div>
        </button>
      </div>
    </div>
  </div>

  <!-- ===== MODAL: PLANTILLAS GUARDADAS ===== -->
  <div id="modal-templates" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card modal-large">
      <div class="modal-header">
        <h3>Mis Plantillas</h3>
        <button class="modal-close" onclick="Modal.close('modal-templates')">âœ•</button>
      </div>
      <div id="templates-list" class="templates-list"></div>
    </div>
  </div>
  
  <!-- ===== MODAL: CONFIGURACIÃ“N DE EQUIPO ===== -->
  <div id="modal-equipment-type" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-header">
        <h3>Tipo de Equipo</h3>
        <button class="modal-close" onclick="Modal.close('modal-equipment-type')">âœ•</button>
      </div>
      
      <div class="equipment-selection">
        <button class="equipment-option" data-type="machine" onclick="selectEquipmentType('machine')">
          <div class="eq-icon">ğŸ”§</div>
          <div class="eq-label">MÃ¡quina</div>
        </button>
        <button class="equipment-option" data-type="barbell" onclick="selectEquipmentType('barbell')">
          <div class="eq-icon">ğŸ‹ï¸</div>
          <div class="eq-label">Barra Libre</div>
        </button>
        <button class="equipment-option" data-type="dumbbell" onclick="selectEquipmentType('dumbbell')">
          <div class="eq-icon">ğŸ’ª</div>
          <div class="eq-label">Mancuernas</div>
        </button>
      </div>
      
      <!-- ConfiguraciÃ³n de barra -->
      <div id="barbell-config" class="barbell-config hidden">
        <label class="config-label">Tipo de barra</label>
        <div class="barbell-options">
          <button class="barbell-option" onclick="selectBarbellType(0)">OlÃ­mpica (20kg)</button>
          <button class="barbell-option" onclick="selectBarbellType(1)">EZ (10kg)</button>
          <button class="barbell-option" onclick="selectBarbellType(2)">Hexagonal (25kg)</button>
          <button class="barbell-option" onclick="selectBarbellType(3)">Fija (15kg)</button>
          <button class="barbell-option" onclick="selectBarbellType(4)">Personalizada</button>
        </div>
        <div class="custom-barbell-weight">
          <label class="config-label">Peso de la barra (kg)</label>
          <input type="number" id="barbell-custom-weight" class="modal-input" 
                placeholder="Peso en kg" inputmode="decimal" step="0.5" />
        </div>
      </div>
      
      <!-- ConfiguraciÃ³n de mÃ¡quina -->
      <div id="machine-config" class="machine-config hidden">
        <div class="machine-note">
          <div class="note-icon">âš ï¸</div>
          <div class="note-text">
            El peso en mÃ¡quinas puede variar segÃºn el diseÃ±o. Registra el peso que muestres en la mÃ¡quina.
          </div>
        </div>
      </div>
      
      <button class="btn-primary" id="btn-confirm-equipment">Confirmar</button>
    </div>
  </div>

  <!-- ===== MODAL: WORKOUT DETAIL ===== -->
  <div id="modal-workout-detail" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card modal-large">
      <div class="modal-header">
        <h3 id="detail-modal-title">Detalle</h3>
        <button class="modal-close" id="modal-close-detail">âœ•</button>
      </div>
      <div id="detail-modal-content" class="detail-content"></div>
    </div>
  </div>

  <!-- ===== MODAL: COMMENTS ===== -->
  <div id="modal-comments" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-header">
        <h3>Comentarios</h3>
        <button class="modal-close" id="modal-close-comments">âœ•</button>
      </div>
      <div id="comments-list" class="comments-list"></div>
      <div class="comment-input-wrap">
        <input type="text" id="comment-input" class="modal-input" placeholder="Escribe un comentario..." />
        <button class="btn-send" id="btn-send-comment">â†’</button>
      </div>
    </div>
  </div>

  <!-- ===== TOAST NOTIFICATION ===== -->
  <div id="toast" class="toast hidden"></div>

  <script src="app.js"></script>
</body>
</html>
